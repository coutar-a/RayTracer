
#include "raytracer.h"

static const t_fill	g_objet[] = {
  {"pos", &fill_sphere_pos},
  {"ray", &fill_sphere_ray},
  {"angle", &fill_sphere_angle},
  {"color", &fill_sphere_color},
  {"transparency", &fill_sphere_transparencuy},
  {"negative", &fill_sphere_negative},
  {"texture", &fill_sphere_texture},
   {NULL, NULL},
};

int	fill_sphere(t_params *params, char **file, int *i)
{
  char	**tab;
  int	i;

  i = -1;
  tab = NULL;
  if ((tab = my_str_to_wordtab(file[*i], '=')) == NULL)
    return (ERROR);
  while (g_objet[++i].line != NULL)
    {
      if (my_strcmp(g_objet[i].line[i], tab[0]) == 0)
	g_objet[i].ptr(params, tab[0]);
    }
  if (my_strcmp(tab[0], "ray") == 0)
    {
      if (fill_window_in_params_height(params, tab[1]) == ERROR)
        return (ERROR);
    }
  else if (my_strcmp(tab[0], "pos") == 0)
    {
      if (fill_window_in_params_lenght(params, tab[1]) == ERROR)
        return (ERROR);
    }
  else if (my_strcmp(tab[0], "pos_eye") == 0)
    if (fill_window_in_params_pos_eye(params, tab[1]) == ERROR)
      return (ERROR);
  free_tab(tab);
  return (0);
}
